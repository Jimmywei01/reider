(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8d33be22"],{1276:function(e,t,r){"use strict";var n=r("d784"),a=r("44e7"),i=r("825a"),s=r("1d80"),o=r("4840"),l=r("8aa5"),u=r("50c4"),c=r("14c3"),m=r("9263"),d=r("d039"),p=[].push,f=Math.min,h=4294967295,g=!d((function(){return!RegExp(h,"y")}));n("split",2,(function(e,t,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var n=String(s(this)),i=void 0===r?h:r>>>0;if(0===i)return[];if(void 0===e)return[n];if(!a(e))return t.call(n,e,i);var o,l,u,c=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,g=new RegExp(e.source,d+"g");while(o=m.call(g,n)){if(l=g.lastIndex,l>f&&(c.push(n.slice(f,o.index)),o.length>1&&o.index<n.length&&p.apply(c,o.slice(1)),u=o[0].length,f=l,c.length>=i))break;g.lastIndex===o.index&&g.lastIndex++}return f===n.length?!u&&g.test("")||c.push(""):c.push(n.slice(f)),c.length>i?c.slice(0,i):c}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:t.call(this,e,r)}:t,[function(t,r){var a=s(this),i=void 0==t?void 0:t[e];return void 0!==i?i.call(t,a,r):n.call(String(a),t,r)},function(e,a){var s=r(n,e,this,a,n!==t);if(s.done)return s.value;var m=i(e),d=String(this),p=o(m,RegExp),v=m.unicode,b=(m.ignoreCase?"i":"")+(m.multiline?"m":"")+(m.unicode?"u":"")+(g?"y":"g"),w=new p(g?m:"^(?:"+m.source+")",b),x=void 0===a?h:a>>>0;if(0===x)return[];if(0===d.length)return null===c(w,d)?[d]:[];var $=0,y=0,k=[];while(y<d.length){w.lastIndex=g?y:0;var _,I=c(w,g?d:d.slice(y));if(null===I||(_=f(u(w.lastIndex+(g?0:y)),d.length))===$)y=l(d,y,v);else{if(k.push(d.slice($,y)),k.length===x)return k;for(var E=1;E<=I.length-1;E++)if(k.push(I[E]),k.length===x)return k;y=$=_}}return k.push(d.slice($)),k}]}),!g)},1629:function(e,t,r){"use strict";r("31ba")},"1a8b":function(e,t,r){},"31ba":function(e,t,r){},"7db6":function(e,t,r){"use strict";r("1a8b")},"8a91":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"homeSide"},[r("div",{staticClass:"container"},[r("div",{staticClass:"box-avatar"},[r("img",{ref:"main",staticClass:"user-avatar",attrs:{src:""+e.form.avatar,alt:""}}),r("p",[e._v(e._s(e.form.username))])]),r("div",{staticClass:"box-option"},["user"!==this.identity?r("div",{on:{click:e.dashboard}},[e._v("後台管理")]):e._e(),r("div",{on:{click:e.userInfo}},[e._v("帳戶設定")]),r("div",{on:{click:e.userOrder}},[e._v("訂單管理")])])])])},a=[],i=(r("96cf"),r("1da1")),s=r("5530"),o=r("2f62"),l={name:"HomeSide",data:function(){return{identity:"",userId:null,form:{}}},props:{newForm:{type:String}},computed:Object(s["a"])({},Object(o["b"])(["user"])),mounted:function(){this.checkIdentity()},watch:{newForm:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("member/getMembers");case 2:return e.next=4,t.$store.commit("member/SET_HOME_MEMBER",t.userId);case 4:return e.next=6,t.$store.getters.memberOne;case 6:t.form=e.sent;case 7:case"end":return e.stop()}}),e)})))()}},methods:{checkIdentity:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("member/getMembers");case 2:return e.identity=e.user.identity,e.userId=e.user.id,t.next=6,e.$store.commit("member/SET_HOME_MEMBER",e.userId);case 6:return t.next=8,e.$store.getters.memberOne;case 8:e.form=t.sent;case 9:case"end":return t.stop()}}),t)})))()},dashboard:function(){this.$router.push("/dashboard")},userInfo:function(){this.$router.push("/user")},userOrder:function(){this.$router.push({path:"/userOrder/".concat(this.userId)})}}},u=l,c=(r("7db6"),r("2877")),m=Object(c["a"])(u,n,a,!1,null,"5dd75a31",null);t["a"]=m.exports},e382:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"container",attrs:{"element-loading-text":"加载中","element-loading-background":"rgba(239, 239, 239, 0.8)"}},[r("HomeSide",{attrs:{newForm:e.newForm}}),r("div",{staticClass:"user-box"},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.form_rules}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"姓名",prop:"username",placeholder:"請輸入性名"}},[r("el-input",{staticClass:"boxInput-name",model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"電話",prop:"phone"}},[r("el-input",{staticClass:"boxInput-phone",attrs:{placeholder:"請輸入電話",type:"phone"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"Email",prop:"email"}},[r("el-input",{staticStyle:{width:"15rem"},attrs:{placeholder:"請輸入電子信箱",type:"email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1)],1),r("el-row",{staticClass:"updateImage"},[r("el-form-item",{attrs:{label:"圖片"}},[r("el-col",{attrs:{span:24}},[r("el-upload",{ref:"upload",attrs:{multiple:!1,limit:1,action:"","auto-upload":!1,"on-change":e.getFile,"before-upload":e.beforeAvatarUpload,"list-type":"picture-card"}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v(" Click upload ")])],1)],1)],1),r("p",[e._v("頭像儲存後，您可能需要重新登入，查看最新的頭像效果")])],1)],1),r("div",{staticClass:"box-footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit("form")}}},[e._v("更新")])],1)],1)],1)},a=[],i=(r("d3b7"),r("ac1f"),r("1276"),r("96cf"),r("1da1")),s=r("8a91"),o=r("bb46"),l={name:"User",components:{HomeSide:s["a"]},data:function(){return{userId:null,form:{username:"",email:"",avatar:"",phone:""},form_rules:{username:[{required:!0,validator:o["validateName"],trigger:"blur"}],email:[{required:!0,validator:o["validateEmail"],trigger:"blur"}],phone:[{required:!0,validator:o["validatePhone"],trigger:"blur"}]},newForm:null,loading:null}},created:function(){this.userData()},methods:{getLoading:function(e){this.loading=e},userData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("member/getMembers");case 2:return e.userId=e.$store.getters.user.id,t.next=5,e.$store.commit("member/SET_HOME_MEMBER",e.userId);case 5:e.form=e.$store.getters.memberOne;case 6:case"end":return t.stop()}}),t)})))()},getFile:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.getBase64(e).then((function(e){var r=e.split(",");r.length>0&&(t.form.avatar=r[1])}));case 1:case"end":return r.stop()}}),r)})))()},getBase64:function(e){return new Promise((function(t,r){var n=new FileReader,a="";n.readAsDataURL(e.raw),n.onload=function(){a=n.result},n.onerror=function(e){r(e)},n.onloadend=function(){t(a)}}))},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,r="image/jpg"===e.type,n="image/png"===e.type,a=e.size/1024/1024<1;return t||r||n||this.$message.warning("只支持jpg或png格式圖片"),a||this.$message.warning("請上傳1MB以內的圖片！"),(t||r||n)&&a},submit:function(e){var t=this;this.form.flag="homeDesk",this.$refs[e].validate((function(e){t.newForm="",e&&(t.loading=!0,t.$store.dispatch("member/updateMember",t.form).then((function(e){t.loading=!1,t.$swal.fire({icon:"success",title:"修改成功"}).then((function(e){t.$refs.upload.clearFiles(),t.newForm="updateForm"})),t.userData()}))["catch"]((function(e){t.loading=!1,e.data&&t.$swal.fire({icon:"error",title:"檔案過大"})})))}))}}},u=l,c=(r("1629"),r("2877")),m=Object(c["a"])(u,n,a,!1,null,"0551f3dc",null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-8d33be22.36c9a6df.js.map