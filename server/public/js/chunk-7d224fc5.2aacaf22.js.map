{"version":3,"sources":["webpack:///./src/views/member/components/FilterPlan.vue?9044","webpack:///./src/views/member/index.vue?74cd","webpack:///./src/utils/setPage.js","webpack:///./src/views/member/index.vue?88a8","webpack:///./src/views/member/components/FilterPlan.vue?c8fc","webpack:///src/views/member/components/FilterPlan.vue","webpack:///./src/views/member/components/FilterPlan.vue?a192","webpack:///./src/views/member/components/FilterPlan.vue","webpack:///src/views/member/index.vue","webpack:///./src/views/member/index.vue?7508","webpack:///./src/views/member/index.vue"],"names":["setPage","total","currentPage","pageSize","tableData","slice","render","_vm","this","_h","$createElement","_c","_self","staticClass","on","handleFilterIdentity","handleFilterEmail","attrs","scopedSlots","_u","key","fn","ref","row","staticStyle","_v","_s","createdAt","username","identity","email","phone","user","$event","handleEdit","dialog","form","getUsers","slot","form_rules","formLabelWidth","model","value","callback","$$v","$set","expression","handleDelete","_e","pagination","handleCurrentChange","staticRenderFns","getIdentity","_l","item","getEmail","input","name","data","identityOptions","methods","$emit","component","components","FilterPlan","dialogFormVisible","show","filterIdentity","created","computed","setPagination","length","id"],"mappings":"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","file":"js/chunk-7d224fc5.2aacaf22.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilterPlan.vue?vue&type=style&index=0&id=23de7693&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=3e769ba4&lang=scss&scoped=true&\"","export function setPage (total, currentPage, pageSize) {\n  const tableData = total.slice((currentPage - 1) * pageSize, currentPage * pageSize)\n  return tableData\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"memberArea\"},[_c('FilterPlan',{on:{\"update:filtIdentity\":_vm.handleFilterIdentity,\"update:filtEmail\":_vm.handleFilterEmail}}),_c('section',{staticClass:\"form_container\"},[_c('el-table',{attrs:{\"type\":\"flex\",\"justify\":\"center\",\"align\":\"middle\",\"data\":_vm.tableData,\"max-height\":\"450\"}},[_c('el-table-column',{attrs:{\"label\":\"建立日期\",\"prop\":\"createdAt\",\"align\":\"center\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('i',{staticClass:\"el-icon-time\"}),_c('span',{staticStyle:{\"margin-left\":\"10px\"}},[_vm._v(_vm._s(row.createdAt.slice(0, 10)))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"姓名\",\"align\":\"center\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('p',[_vm._v(_vm._s(row.username))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"權限\",\"align\":\"center\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('p',[_vm._v(_vm._s(row.identity))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"Email\",\"align\":\"center\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('p',[_vm._v(_vm._s(row.email))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"電話\",\"align\":\"center\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('p',[_vm._v(_vm._s(row.phone))])]}}])}),(_vm.user.identity === 'admin')?_c('el-table-column',{attrs:{\"label\":\"Actions\",\"align\":\"center\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('el-button',{staticClass:\"btn\",attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleEdit(row)}}},[_vm._v(\"Edit \")]),_c('template',{attrs:{\"dialog\":_vm.dialog,\"form\":_vm.form},on:{\"update:updateData\":_vm.getUsers},slot:\"form\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.form_rules}},[_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"姓名\",\"prop\":\"username\",\"label-width\":_vm.formLabelWidth,\"placeholder\":\"請輸入性名\"}},[_c('el-input',{model:{value:(_vm.form.username),callback:function ($$v) {_vm.$set(_vm.form, \"username\", $$v)},expression:\"form.username\"}})],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"權限\",\"prop\":\"identity\",\"label-width\":_vm.formLabelWidth}},[_c('el-select',{attrs:{\"placeholder\":\"請選擇權限\"},model:{value:(_vm.form.identity),callback:function ($$v) {_vm.$set(_vm.form, \"identity\", $$v)},expression:\"form.identity\"}},[_c('el-option',{attrs:{\"label\":\"admin\",\"value\":\"admin\"}}),_c('el-option',{attrs:{\"label\":\"editor\",\"value\":\"editor\"}}),_c('el-option',{attrs:{\"label\":\"user\",\"value\":\"user\"}})],1)],1)],1)],1),_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"Email\",\"prop\":\"email\",\"label-width\":_vm.formLabelWidth}},[_c('el-input',{attrs:{\"placeholder\":\"請輸入電子信箱\",\"type\":\"email\"},model:{value:(_vm.form.email),callback:function ($$v) {_vm.$set(_vm.form, \"email\", $$v)},expression:\"form.email\"}})],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label\":\"電話\",\"prop\":\"phone\",\"label-width\":_vm.formLabelWidth}},[_c('el-input',{attrs:{\"placeholder\":\"請輸入電話\",\"type\":\"phone\"},model:{value:(_vm.form.phone),callback:function ($$v) {_vm.$set(_vm.form, \"phone\", $$v)},expression:\"form.phone\"}})],1)],1)],1)],1)],1),_c('el-button',{staticClass:\"btn\",attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.handleDelete(row)}}},[_vm._v(\"Delete \")])]}}],null,false,1824900126)}):_vm._e()],1)],1),_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"total\":_vm.pagination.total,\"pageSize\":_vm.pagination.pageSize,\"currentPage\":_vm.pagination.currentPage},on:{\"current-change\":_vm.handleCurrentChange}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form_container\"},[_c('el-form',{ref:\"form\",attrs:{\"inline\":true,\"label-width\":\"80px\"}},[_c('el-row',[_c('el-col',{staticClass:\"identity_col\",attrs:{\"span\":12}},[_c('el-form-item',{staticClass:\"identity_container\"},[_c('el-select',{attrs:{\"placeholder\":\"用戶權限\",\"clearable\":\"\"},on:{\"change\":_vm.getIdentity},model:{value:(_vm.identity),callback:function ($$v) {_vm.identity=$$v},expression:\"identity\"}},_vm._l((_vm.identityOptions),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1)],1)],1),_c('el-col',{staticClass:\"search_col\",attrs:{\"span\":12}},[_c('div',{staticClass:\"search_container\"},[_c('el-input',{attrs:{\"placeholder\":\"請輸入Email\",\"clearable\":\"\"},on:{\"clear\":function($event){return _vm.getEmail()}},model:{value:(_vm.input),callback:function ($$v) {_vm.input=$$v},expression:\"input\"}}),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"},on:{\"click\":function($event){return _vm.getEmail(_vm.input)}}})],1)])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"form_container\">\n     <el-form\n         ref=\"form\"\n         :inline=\"true\"\n         label-width=\"80px\">\n        <el-row>\n          <el-col :span=\"12\"  class=\"identity_col\">\n            <el-form-item class=\"identity_container\">\n              <el-select  placeholder=\"用戶權限\"  v-model=\"identity\" clearable @change=\"getIdentity\">\n                <el-option  v-for=\"item in identityOptions\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\"  class=\"search_col\">\n            <div class=\"search_container\">\n              <el-input\n                placeholder=\"請輸入Email\"\n                v-model=\"input\"\n                clearable\n                @clear=\"getEmail()\"\n                >\n              </el-input>\n              <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"getEmail(input)\"></el-button>\n            </div>\n          </el-col>\n        </el-row>\n      </el-form>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'FilterPlan',\n  data () {\n    return {\n      identity: '',\n      identityOptions: ['admin', 'editor', 'user'],\n      input: ''\n    }\n  },\n  /**\n    @method\n      getIdentity   得到權限\n      getEmail      得到 email\n  */\n  methods: {\n    getIdentity (value) {\n      this.$emit('update:filtIdentity', value)\n    },\n    getEmail (value) {\n      this.$emit('update:filtEmail', value)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.form_container {\n  background-color: white;\n  margin-bottom: 25px;\n  border-radius: 5px;\n  text-align: center;\n  box-shadow: 0px 2px 10px #cccc;\n}\n\n.identity_container {\n  margin: 20px;\n}\n\n.search_container {\n  margin: 20px;\n}\n\n.el-form-item .el-select{\n    width: 25rem;\n}\n\n.search_col .search_container {\n    display: flex;\n    width:28rem;\n  }\n\n@media screen and (max-width: 1441px) {\n  .el-form-item .el-select {\n    width: 22rem;\n  }\n  .search_col .search_container {\n    width:22rem;\n  }\n}\n\n@media screen and (max-width: 1025px) {\n  .form_container .el-row {\n    display: flex;\n  }\n  .el-form-item .el-select {\n    width: 15rem;\n  }\n  .search_col .search_container {\n    width:13.5rem;\n  }\n}\n\n@media screen and (max-width: 800px) {\n  .form_container .el-row {\n    display: flex;\n    justify-content: space-evenly;\n    align-items: center;\n  }\n\n  .el-form-item .el-select {\n    width: 10rem;\n  }\n  .search_col .search_container {\n    width:12rem;\n  }\n}\n\n@media screen and (min-width: 300px) and (max-width: 700px) {\n  .form_container .el-row {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  .el-form-item .el-select {\n    width: 12rem;\n  }\n  .search_col .search_container {\n    width: 12rem;\n  }\n  .el-col-12 {\n    width: auto;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilterPlan.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FilterPlan.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FilterPlan.vue?vue&type=template&id=23de7693&scoped=true&\"\nimport script from \"./FilterPlan.vue?vue&type=script&lang=js&\"\nexport * from \"./FilterPlan.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FilterPlan.vue?vue&type=style&index=0&id=23de7693&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"23de7693\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"memberArea\">\n    <FilterPlan @update:filtIdentity=\"handleFilterIdentity\" @update:filtEmail=\"handleFilterEmail\" />\n    <section class=\"form_container\">\n      <el-table type=\"flex\" justify=\"center\" align=\"middle\" :data=\"tableData\" max-height=\"450\">\n        <el-table-column label=\"建立日期\" prop=\"createdAt\" align=\"center\" width=\"180\">\n          <template slot-scope=\"{ row }\">\n            <i class=\"el-icon-time\"></i>\n            <span style=\"margin-left: 10px\">{{ row.createdAt.slice(0, 10) }}</span>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"姓名\" align=\"center\" width=\"180\">\n          <template slot-scope=\"{ row }\">\n            <p>{{ row.username }}</p>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"權限\" align=\"center\" width=\"180\">\n          <template slot-scope=\"{ row }\">\n            <p>{{ row.identity }}</p>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"Email\" align=\"center\" width=\"180\">\n          <template slot-scope=\"{ row }\">\n            <p>{{ row.email }}</p>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"電話\" align=\"center\" width=\"180\">\n          <template slot-scope=\"{ row }\">\n            <p>{{ row.phone }}</p>\n          </template>\n        </el-table-column>\n        <el-table-column v-if=\"user.identity === 'admin'\" label=\"Actions\" align=\"center\" width=\"180\">\n          <template slot-scope=\"{ row }\">\n            <el-button size=\"mini\" type=\"primary\" class=\"btn\" @click=\"handleEdit(row)\">Edit </el-button>\n            <!-- <DialogFound :dialog=\"dialog\" :form=\"form\" @update:updateData=\"getUsers\"></DialogFound> -->\n\n            <template slot=\"form\" :dialog=\"dialog\" :form=\"form\" @update:updateData=\"getUsers\">\n              <el-form :model=\"form\" :rules=\"form_rules\" ref=\"form\">\n                <el-row>\n                  <el-col :span=\"12\">\n                    <el-form-item label=\"姓名\" prop=\"username\" :label-width=\"formLabelWidth\" placeholder=\"請輸入性名\">\n                      <el-input v-model=\"form.username\"></el-input>\n                    </el-form-item>\n                  </el-col>\n                  <el-col :span=\"12\">\n                    <el-form-item label=\"權限\" prop=\"identity\" :label-width=\"formLabelWidth\">\n                      <el-select v-model=\"form.identity\" placeholder=\"請選擇權限\">\n                        <el-option label=\"admin\" value=\"admin\"></el-option>\n                        <el-option label=\"editor\" value=\"editor\"></el-option>\n                        <el-option label=\"user\" value=\"user\"></el-option>\n                      </el-select>\n                    </el-form-item>\n                  </el-col>\n                </el-row>\n                <el-row>\n                  <el-col :span=\"12\">\n                    <el-form-item label=\"Email\" prop=\"email\" :label-width=\"formLabelWidth\">\n                      <el-input v-model=\"form.email\" placeholder=\"請輸入電子信箱\" type=\"email\"></el-input>\n                    </el-form-item>\n                  </el-col>\n                  <el-col :span=\"12\">\n                    <el-form-item label=\"電話\" prop=\"phone\" :label-width=\"formLabelWidth\">\n                      <el-input v-model=\"form.phone\" placeholder=\"請輸入電話\" type=\"phone\"></el-input>\n                    </el-form-item>\n                  </el-col>\n                </el-row>\n              </el-form>\n            </template>\n            <el-button size=\"mini\" type=\"danger\" class=\"btn\" @click=\"handleDelete(row)\">Delete </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </section>\n    <el-pagination\n      background\n      layout=\"prev, pager, next\"\n      @current-change=\"handleCurrentChange\"\n      :total=\"pagination.total\"\n      :pageSize=\"pagination.pageSize\"\n      :currentPage=\"pagination.currentPage\"\n    >\n    </el-pagination>\n  </div>\n</template>\n\n<script>\nimport FilterPlan from './components/FilterPlan'\n// import DialogFound from '@/components/DialogFound/memberDF'\nimport { setPage } from '@/utils/setPage'\nimport { mapGetters } from 'vuex'\n\nexport default {\n  name: 'Member',\n  components: {\n    FilterPlan\n    // DialogFound\n  },\n  data () {\n    return {\n      dialogFormVisible: false,\n      tableData: null,\n      form: {\n        username: '',\n        identity: '',\n        email: '',\n        phone: ''\n      },\n      dialog: {\n        show: false\n      },\n      filterIdentity: '',\n      pagination: {\n        total: 0, // 總頁碼數 10 才會兩頁\n        pageSize: 0, // 每頁要顯示的資料\n        currentPage: 1 // 默認初始頁數，支持 .sync 修饰符\n      }\n    }\n  },\n  created () {\n    this.getUsers()\n  },\n  computed: {\n    ...mapGetters(['user'])\n  },\n  /**\n    @desc 顯示已註冊人員\n    進入頁面先打 user API 拿到全部資料\n    @method\n      getUsers              得到全部資料\n      handleDelete          刪除單一資料\n      handleEdit            編輯單一資料\n      handleFilterIdentity  過濾權限資料\n      handleFilterEmail     過濾Email資料\n      setPagination         初始分頁設定\n      handleCurrentChange   分頁頁碼切換資料處理\n  */\n  methods: {\n    async getUsers () {\n      await this.$store.dispatch('member/getMembers')\n      if (this.filterIdentity) {\n        await this.$store.commit('member/SET_FILTER_MEMBERS', this.filterIdentity)\n        this.tableData = await this.$store.getters.filterMembers\n        this.setPagination()\n      } else {\n        this.tableData = await this.$store.getters.members\n        this.setPagination()\n      }\n    },\n    // 初始分頁設定\n    setPagination () {\n      this.pagination.pageSize = 5\n      this.pagination.total = this.tableData.length\n      this.tableData = setPage(this.tableData, this.pagination.currentPage, this.pagination.pageSize)\n    },\n    // 分頁切換\n    async handleCurrentChange (currentPage) {\n      this.pagination.currentPage = currentPage\n      if (this.filterIdentity) {\n        this.tableData = await this.$store.getters.filterMembers\n        this.tableData = setPage(this.tableData, this.pagination.currentPage, this.pagination.pageSize)\n      } else {\n        this.tableData = await this.$store.getters.members\n        this.tableData = setPage(this.tableData, this.pagination.currentPage, this.pagination.pageSize)\n      }\n    },\n\n    async handleDelete (row) {\n      await this.$store\n        .dispatch('member/deleteMember', row.id)\n        .then((res) => {\n          this.$swal.fire({\n            icon: 'success',\n            title: '刪除成功'\n          })\n          this.getUsers(this.filterIdentity)\n        })\n        .catch((error) => {\n          if (error.data) {\n            this.$swal.fire({\n              icon: 'error',\n              title: error.data.message || '連線有問題'\n            })\n          }\n        })\n    },\n\n    handleEdit (row) {\n      this.dialog = {\n        show: true\n      }\n      this.form = {\n        id: row.id,\n        username: row.username,\n        identity: row.identity,\n        email: row.email,\n        phone: row.phone\n      }\n    },\n    async handleFilterIdentity (value) {\n      this.filterIdentity = value\n      if (value) {\n        await this.$store.commit('member/SET_FILTER_MEMBERS', value)\n        this.tableData = await this.$store.getters.filterMembers\n        this.pagination.currentPage = 1\n        this.setPagination()\n      } else {\n        this.tableData = await this.$store.getters.members\n        this.setPagination()\n      }\n    },\n\n    async handleFilterEmail (email) {\n      if (email) {\n        await this.$store.commit('member/SET_FILTER_MEMBERS', email)\n        this.tableData = await this.$store.getters.filterMembers\n        this.pagination.currentPage = 1\n        this.setPagination()\n      } else {\n        this.tableData = await this.$store.getters.members\n        this.setPagination()\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  .memberArea {\n    max-width: 1350px;\n  }\n  .form_container {\n    background-color: white;\n    margin-bottom: 25px;\n    border-radius: 5px;\n    text-align: center;\n    box-shadow: 0px 2px 10px #cccc;\n  }\n\n  .btn {\n    margin-right: 5px;\n    min-width: 60px;\n  }\n\n  @media screen and (max-width: 800px) {\n    .form_container {\n      width: 100%;\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3e769ba4&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=3e769ba4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e769ba4\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}